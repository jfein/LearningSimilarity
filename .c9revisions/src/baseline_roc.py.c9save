{"ts":1353992470555,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"from util import SourceArticles, PORTER_STEMMER, cosine\nimport random\n\nNUM_POSITIVES = NUM_NEGATIVES = 1000\nTHRESHOLDS = [x / 100.0 for x in xrange(0, 105, 5)]\n\ndef get_cosines(src_articles):\n    # list of (cosine similarities, {-1, +1})\n    positive_cosines = []\n    negative_cosines = []\n\n\n    while len(positive_cosines) < NUM_POSITIVES:\n        num = random.randint(0, src_articles.count - 1)\n        a1, a2 = src_articles.spin_dissimilar_article_sentences(num, 2)\n        positive_cosines.append(cosine(\" \".join(a1), \" \".join(a2)))\n\n    while len(negative_cosines) < NUM_NEGATIVES:\n        num1 = random.randint(0, src_articles.count - 1)\n        similar_articles = list(src_articles.get_very_similar_articles(num1))\n        if not similar_articles:\n            continue\n\n        num2 = random.choice(similar_articles)\n\n        a1 = \" \".join(src_articles.spin_article_sentences(num1))\n        a2 = \" \".join(src_articles.spin_article_sentences(num2))\n        negative_cosines.append(cosine(a1, a2))\n\n\n    return positive_cosines, negative_cosines\n\n\ndef calculate_tp_fp(positive_cosines, negative_cosines, threshold):\n    tp, fp = 0.0, 0.0\n\n    for cos in positive_cosines:\n        if cos >= threshold:\n            tp += 1\n\n    for cos in negative_cosines:\n        if cos >= threshold:\n            fp += 1\n\n    return tp / NUM_POSITIVES, fp / NUM_NEGATIVES\n\n\ndef baseline_roc():\n    src_articles = SourceArticles(\n            stdize_kws=True,\n            stdize_body=False,\n            stemmer=PORTER_STEMMER,\n            include_nested=True,\n            omit_stopwords=False,\n            max_phrase_size=None\n        )\n\n    positive_cosines, negative_cosines = get_cosines(src_articles)\n\n    for threshold in THRESHOLDS:\n        tp_rate, fp_rate = calculate_tp_fp(positive_cosines, negative_cosines, threshold)\n        print \"{threshold}\\n\\tTP RATE : {tp_rate}\\n\\tFP RATE : {fp_rate}\".format(**locals())\n\n\nif __name__ == \"__main__\":\n    baseline_roc()\n"]],"start1":0,"start2":0,"length1":0,"length2":1956}]],"length":1956}
{"contributors":["jeremy.d.fein@gmail.com"],"silentsave":false,"ts":1354037377856,"patch":[[{"diffs":[[0,"ES = 100"],[-1,"0"],[0,"\nTHRESHO"]],"start1":98,"start2":98,"length1":17,"length2":16}]],"length":1955,"saved":false}
{"ts":1354037400137,"patch":[[{"diffs":[[0,"ize_"],[-1,"body"],[1,"article"],[0,"=Fal"]],"start1":1460,"start2":1460,"length1":12,"length2":15}]],"length":1958,"saved":false}
{"ts":1354037421314,"patch":[[{"diffs":[[0,"ER,\n"],[-1,"            include_nested=True,\n"],[0,"    "]],"start1":1511,"start2":1511,"length1":41,"length2":8}]],"length":1925,"saved":false}
{"contributors":["jeremy.d.fein@gmail.com"],"silentsave":false,"ts":1354038468642,"patch":[[{"diffs":[[0,"random\n\n"],[1,"\n"],[0,"NUM_POSI"]],"start1":63,"start2":63,"length1":16,"length2":17},{"diffs":[[0,"TIVES = "],[-1,"1"],[1,"5"],[0,"00\nTHRES"]],"start1":96,"start2":96,"length1":17,"length2":17},{"diffs":[[0,"5, 5)]\n\n"],[1,"\n"],[0,"def get_"]],"start1":153,"start2":153,"length1":16,"length2":17},{"diffs":[[0,"s):\n"],[-1,"    # list of (cosine similarities, {-1, +1})\n"],[0,"    "]],"start1":189,"start2":189,"length1":54,"length2":8},{"diffs":[[0,"s = []\n\n"],[-1,"\n"],[0,"    whil"]],"start1":238,"start2":238,"length1":17,"length2":16},{"diffs":[[0,"ilar_article"],[-1,"_sentence"],[0,"s(num, 2)\n  "]],"start1":392,"start2":392,"length1":33,"length2":24},{"diffs":[[0,"ontinue\n"],[-1,"\n"],[0,"        "]],"start1":713,"start2":713,"length1":17,"length2":16},{"diffs":[[0,"r_articles)\n"],[-1,"\n"],[0,"        a1 ="]],"start1":756,"start2":756,"length1":25,"length2":24},{"diffs":[[0,"spin_article"],[-1,"_sentences"],[0,"(num1))\n    "]],"start1":803,"start2":803,"length1":34,"length2":24},{"diffs":[[0,"icle"],[-1,"_sentences"],[0,"(num"]],"start1":866,"start2":866,"length1":18,"length2":8},{"diffs":[[0,", a2))\n\n"],[-1,"\n"],[0,"    retu"]],"start1":919,"start2":919,"length1":17,"length2":16},{"diffs":[[0,"    "],[1,"#"],[0,"st"],[-1,"emm"],[1,"diz"],[0,"er=P"]],"start1":1410,"start2":1410,"length1":13,"length2":14}]],"length":1849,"saved":false}
